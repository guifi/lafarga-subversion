<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">

<html>
<head>
  <meta name="generator" content="HTML Tidy for Linux/x86 (vers 1st August 2004), see www.w3.org">

  <title>Empty Poller Output Table</title>
  <meta name="GENERATOR" content="Modular DocBook HTML Stylesheet Version 1.79">
  <link rel="HOME" title="The Cacti Manual" href="index.html">
  <link rel="UP" title="Command Line Scripts" href="scripts.html">
  <link rel="PREVIOUS" title="Re-Index Hosts" href="cli_poller_reindex_hosts.html">
  <link rel="NEXT" title="Reapply Suggested Names to Graphs" href="cli_poller_graphs_reapply_names.html">
  <link rel="STYLESHEET" type="text/css" href="manual.css">
</head>

<body class="SECT1" bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#840084" alink="#0000FF">
  <div class="NAVHEADER">
    <table summary="Header navigation table" width="100%" border="0" cellpadding="0" cellspacing="0">
      <tr>
        <th colspan="3" align="center">The Cacti Manual</th>
      </tr>

      <tr>
        <td width="10%" align="left" valign="bottom"><a href="cli_poller_reindex_hosts.html" accesskey="P">Prev</a></td>

        <td width="80%" align="center" valign="bottom">Chapter 20. Command Line Scripts</td>

        <td width="10%" align="right" valign="bottom"><a href="cli_poller_graphs_reapply_names.html" accesskey="N">Next</a></td>
      </tr>
    </table>
    <hr align="left" width="100%">
  </div>

  <div class="SECT1">
    <h1 class="SECT1"><a name="CLI_POLLER_OUTPUT_EMPTY" id="CLI_POLLER_OUTPUT_EMPTY">Empty Poller Output Table</a></h1>

    <p>During normal poller operation, all retrieved results are intermediately stored in the table named <code class="STRUCTNAME">poller_output</code> After execution of <span class="APPLICATION">cmd.php</span> or <span class="APPLICATION">Spine</span>, this table holds all results. The <span class="APPLICATION">poller.php</span> finally issues all <span class="APPLICATION">rrdtool update</span> operations. Thus, after polling has completed, the table should be empty.</p>

    <p>Conditions may arise, where the table is not (completely) emptied. The most often known issue is lack of php memory. In those cases, the table is bigger than the php memory size, thus not all items are handled correctly. If that issue occurs, you may save all pending updates <b class="EMPHASIS">after increasing PHP memory appropriately</b> by running this very script. Calling the script with the parameter <kbd class="USERINPUT">--help</kbd> yields</p>
    <pre class="SCREEN">
<samp class="PROMPT">shell&gt;</samp>php -q poller_output_empty.php --help
Cacti Empty Poller Output Table Script 1.0, Copyright 2007 - The Cacti Group

usage: poller_output_empty.php [-h] [--help] [-v] [--version]

-v --version  - Display this help message
-h --help     - Display this help message
</pre>

    <p>You see, no parameter is required for operating successfully. Under normal circumstances, running this script should yield</p>
    <pre class="SCREEN">
<samp class="PROMPT">shell&gt;</samp>php -q poller_output_empty.php
There were 0, RRD updates made this pass
<samp class="PROMPT">shell&gt;</samp>
</pre>

    <p>In case, you hit the poller process or if the table was really not fully processed, you may find</p>
    <pre class="SCREEN">
<samp class="PROMPT">shell&gt;</samp>php -q poller_output_empty.php
OK u:0.00 s:0.00 r:0.04
OK u:0.00 s:0.00 r:0.04
OK u:0.00 s:0.00 r:0.04
OK u:0.00 s:0.00 r:0.04
OK u:0.00 s:0.00 r:0.04
OK u:0.00 s:0.00 r:0.04
OK u:0.00 s:0.00 r:0.04
OK u:0.00 s:0.00 r:0.04
OK u:0.00 s:0.00 r:0.04
OK u:0.00 s:0.00 r:0.05
OK u:0.00 s:0.00 r:0.05
OK u:0.00 s:0.00 r:0.05
OK u:0.00 s:0.00 r:0.05
OK u:0.00 s:0.00 r:0.05
OK u:0.00 s:0.00 r:0.05
OK u:0.00 s:0.00 r:0.05
OK u:0.00 s:0.00 r:0.05
OK u:0.00 s:0.00 r:0.05
OK u:0.00 s:0.00 r:0.05
OK u:0.00 s:0.00 r:0.05
OK u:0.00 s:0.01 r:0.06
There were 21, RRD updates made this pass
<samp class="PROMPT">shell&gt;</samp>
</pre>

    <p>If logging level verbosity was switched to <kbd class="USERINPUT">DEBUG</kbd> you may find additional debug messages that usually show up in <tt class="FILENAME">cacti.log</tt></p>
  </div>

  <div class="NAVFOOTER">
    <hr align="left" width="100%">

    <table summary="Footer navigation table" width="100%" border="0" cellpadding="0" cellspacing="0">
      <tr>
        <td width="33%" align="left" valign="top"><a href="cli_poller_reindex_hosts.html" accesskey="P">Prev</a></td>

        <td width="34%" align="center" valign="top"><a href="index.html" accesskey="H">Home</a></td>

        <td width="33%" align="right" valign="top"><a href="cli_poller_graphs_reapply_names.html" accesskey="N">Next</a></td>
      </tr>

      <tr>
        <td width="33%" align="left" valign="top">Re-Index Hosts</td>

        <td width="34%" align="center" valign="top"><a href="scripts.html" accesskey="U">Up</a></td>

        <td width="33%" align="right" valign="top">Reapply Suggested Names to Graphs</td>
      </tr>
    </table>
  </div>
</body>
</html>

<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">

<html>
<head>
  <meta name="generator" content="HTML Tidy for Linux/x86 (vers 1st August 2004), see www.w3.org">

  <title>Add Graph Permissions</title>
  <meta name="GENERATOR" content="Modular DocBook HTML Stylesheet Version 1.79">
  <link rel="HOME" title="The Cacti Manual" href="index.html">
  <link rel="UP" title="Command Line Scripts" href="scripts.html">
  <link rel="PREVIOUS" title="Add Items to a Tree" href="cli_add_tree.html">
  <link rel="NEXT" title="Debugging" href="debugging.html">
  <link rel="STYLESHEET" type="text/css" href="manual.css">
</head>

<body class="SECT1" bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#840084" alink="#0000FF">
  <div class="NAVHEADER">
    <table summary="Header navigation table" width="100%" border="0" cellpadding="0" cellspacing="0">
      <tr>
        <th colspan="3" align="center">The Cacti Manual</th>
      </tr>

      <tr>
        <td width="10%" align="left" valign="bottom"><a href="cli_add_tree.html" accesskey="P">Prev</a></td>

        <td width="80%" align="center" valign="bottom">Chapter 20. Command Line Scripts</td>

        <td width="10%" align="right" valign="bottom"><a href="debugging.html" accesskey="N">Next</a></td>
      </tr>
    </table>
    <hr align="left" width="100%">
  </div>

  <div class="SECT1">
    <h1 class="SECT1"><a name="CLI_ADD_PERMS" id="CLI_ADD_PERMS">Add Graph Permissions</a></h1>

    <p>This script is used to specify special graph permissions to users. The list of parameters is displyed as usual when calling the script with the parameter <kbd class="USERINPUT">--help</kbd></p>
    <pre class="SCREEN">
<samp class="PROMPT">shell&gt;</samp>php -q add_perms.php --help

Add Permissions Script 1.0, Copyright 2007 - The Cacti Group

A simple command line utility to add permissions to tree items in Cacti

usage: add_perms.php [ --user-id=[ID] ]
    --item-type=[graph|tree|host|graph_template]
    --item-id [--quiet]

Where item-id is the id of the object of type item-type
List Options:
    --list-users
    --list-trees
    --list-graph-templates
    --list-graphs --host-id=[ID]
</pre>

    <div class="SECT2">
      <h2 class="SECT2"><a name="CLI_ADD_PERMS_LIST_USERS" id="CLI_ADD_PERMS_LIST_USERS">List Users</a></h2>

      <p>The list of users is retrieved by calling the script with the parameter <kbd class="USERINPUT">--list-users</kbd>. It goes like</p>
      <pre class="SCREEN">
<samp class="PROMPT">shell&gt;</samp>php -q add_perms.php --list-users

Known Users:
id      username        full_name
1       admin   Administrator
3       guest   Guest Account
</pre>
    </div>

    <div class="SECT2">
      <h2 class="SECT2"><a name="CLI_ADD_PERMS_LIST_TREES" id="CLI_ADD_PERMS_LIST_TREES">List Trees</a></h2>

      <p>The list of trees is retrieved by calling the script with the parameter <kbd class="USERINPUT">--list-trees</kbd>. It goes like</p>
      <pre class="SCREEN">
<samp class="PROMPT">shell&gt;</samp>php -q add_perms.php --list-trees

Known Trees:
id      sort method                     name
1       Manual Ordering (No Sorting)    Default Tree
</pre>
    </div>

    <div class="SECT2">
      <h2 class="SECT2"><a name="CLI_ADD_PERMS_LIST_GRAPH_TEMPLATES" id="CLI_ADD_PERMS_LIST_GRAPH_TEMPLATES">List Graph Templates</a></h2>

      <p>The list of available graph templates is retrieved by calling the script with the parameter <kbd class="USERINPUT">--list-graph-templates</kbd>. It goes like</p>
      <pre class="SCREEN">
<samp class="PROMPT">shell&gt;</samp>php -q add_perms.php --list-graph-templates

Known Graph Templates:(id, name)
2       Interface - Traffic (bits/sec)
3       ucd/net - Available Disk Space
4       ucd/net - CPU Usage
5       Karlnet - Wireless Levels
6       Karlnet - Wireless Transmissions
7       Unix - Ping Latency
8       Unix - Processes
9       Unix - Load Average
...
</pre>
    </div>

    <div class="SECT2">
      <h2 class="SECT2"><a name="CLI_ADD_PERMS_LIST_GRAPHS" id="CLI_ADD_PERMS_LIST_GRAPHS">List Graphs for given Hosts</a></h2>

      <p>To be able to add a permissions to a specific Graph, the id of that very graph is required. Thus, a <kbd class="USERINPUT">--list-graphs --host-id=[id]</kbd> option was implemented</p>
      <pre class="SCREEN">
<samp class="PROMPT">shell&gt;</samp>php -q add_perms.php --list-graphs --host-id=1

Known Host Graphs: (id, name, template)
1       Localhost - Memory Usage                Linux - Memory Usage
2       Localhost - Load Average                Unix - Load Average
3       Localhost - Logged in Users             Unix - Logged in Users
4       Localhost - Processes                   Unix - Processes
5       Localhost - Traffic - eth0              Interface - Traffic (bits/sec, 95th Percentile)
33      Localhost - Used Space - Memory Buffers Host MIB - Available Disk Space
34      Localhost - Used Space - Real Memory    Host MIB - Available Disk Space
35      Localhost - Used Space - Swap Space     Host MIB - Available Disk Space
36      Localhost - Used Space - /              Host MIB - Available Disk Space
37      Localhost - Used Space - /sys           Host MIB - Available Disk Space
38      Localhost - Used Space - /boot          Host MIB - Available Disk Space
</pre>
    </div>

    <div class="SECT2">
      <h2 class="SECT2"><a name="CLI_ADD_PERMS_USER" id="CLI_ADD_PERMS_USER">Add Graph Permissions to specific Users</a></h2>

      <p>There are various ways to define graph permissions to specific users. First, we will add graph permissions for a given host. This is done using the parameter <kbd class="USERINPUT">--item-type=host</kbd> as follows</p>
      <pre class="SCREEN">
<samp class="PROMPT">shell&gt;</samp>php -q add_perms.php --user-id=4 --item-type=host --item-id=1
</pre>

      <p><kbd class="USERINPUT">--user-id=4</kbd> must specify an existing users. Else, an error message will be printed. As <kbd class="USERINPUT">--item-type=host</kbd> is given, <kbd class="USERINPUT">--item-id=1</kbd> must specify a valid host. Again, if no host with this specific id exists, an error message will be printed. No output is produced on successful operations.</p>

      <p>Next, we will add graph permissions for a given tree. This is done using the parameter <kbd class="USERINPUT">--item-type=tree</kbd> as follows</p>
      <pre class="SCREEN">
<samp class="PROMPT">shell&gt;</samp>php -q add_perms.php --user-id=4 --item-type=tree --item-id=1
</pre>

      <p><kbd class="USERINPUT">--user-id=4</kbd> must specify an existing users. Else, an error message will be printed. As <kbd class="USERINPUT">--item-type=tree</kbd> is given, <kbd class="USERINPUT">--item-id=1</kbd> must specify a valid tree (the <span class="GUIMENUITEM">Default Tree</span> in this case). Again, if no tree with this specific id exists, an error message will be printed. No output is produced on successful operations.</p>

      <p>Adding graph permissions for a given graph template is done using the parameter <kbd class="USERINPUT">--item-type=graph_template</kbd> as follows</p>
      <pre class="SCREEN">
<samp class="PROMPT">shell&gt;</samp>php -q add_perms.php --user-id=4 --item-type=graph_template --item-id=25
</pre>

      <p><kbd class="USERINPUT">--user-id=4</kbd> must specify an existing users. Else, an error message will be printed. As <kbd class="USERINPUT">--item-type=graph_template</kbd> is given, <kbd class="USERINPUT">--item-id=1</kbd> must specify a valid graph_template (the <span class="GUIMENUITEM">Interface - Traffic (bytes/sec)</span> in this case). Again, if no graph template with this specific id exists, an error message will be printed. No output is produced on successful operations.</p>

      <p>Last but not least we add graph permissions for a given graph by using the parameter <kbd class="USERINPUT">--item-type=graph</kbd> as follows</p>
      <pre class="SCREEN">
<samp class="PROMPT">shell&gt;</samp>php -q add_perms.php --user-id=4 --item-type=graph --item-id=8
</pre>

      <p><kbd class="USERINPUT">--user-id=4</kbd> must specify an existing users. Else, an error message will be printed. As <kbd class="USERINPUT">--item-type=graph</kbd> is given, <kbd class="USERINPUT">--item-id=1</kbd> must specify a valid graph. Again, if no graph template with this specific id exists, an error message will be printed. No output is produced on successful operations.</p>
    </div>
  </div>

  <div class="NAVFOOTER">
    <hr align="left" width="100%">

    <table summary="Footer navigation table" width="100%" border="0" cellpadding="0" cellspacing="0">
      <tr>
        <td width="33%" align="left" valign="top"><a href="cli_add_tree.html" accesskey="P">Prev</a></td>

        <td width="34%" align="center" valign="top"><a href="index.html" accesskey="H">Home</a></td>

        <td width="33%" align="right" valign="top"><a href="debugging.html" accesskey="N">Next</a></td>
      </tr>

      <tr>
        <td width="33%" align="left" valign="top">Add Items to a Tree</td>

        <td width="34%" align="center" valign="top"><a href="scripts.html" accesskey="U">Up</a></td>

        <td width="33%" align="right" valign="top">Debugging</td>
      </tr>
    </table>
  </div>
</body>
</html>

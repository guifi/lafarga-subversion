<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">

<html>
<head>
  <meta name="generator" content="HTML Tidy for Linux/x86 (vers 1st August 2004), see www.w3.org">

  <title>Check cacti's poller</title>
  <meta name="GENERATOR" content="Modular DocBook HTML Stylesheet Version 1.79">
  <link rel="HOME" title="The Cacti Manual" href="index.html">
  <link rel="UP" title="Debugging" href="debugging.html">
  <link rel="PREVIOUS" title="Check Basic Data Gathering" href="check_data_gathering.html">
  <link rel="NEXT" title="Check MySQL updating" href="check_mysql_updating.html">
  <link rel="STYLESHEET" type="text/css" href="manual.css">
</head>

<body class="SECT1" bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#840084" alink="#0000FF">
  <div class="NAVHEADER">
    <table summary="Header navigation table" width="100%" border="0" cellpadding="0" cellspacing="0">
      <tr>
        <th colspan="3" align="center">The Cacti Manual</th>
      </tr>

      <tr>
        <td width="10%" align="left" valign="bottom"><a href="check_data_gathering.html" accesskey="P">Prev</a></td>

        <td width="80%" align="center" valign="bottom">Chapter 21. Debugging</td>

        <td width="10%" align="right" valign="bottom"><a href="check_mysql_updating.html" accesskey="N">Next</a></td>
      </tr>
    </table>
    <hr align="left" width="100%">
  </div>

  <div class="SECT1">
    <h1 class="SECT1"><a name="CHECK_CACTI_POLLER" id="CHECK_CACTI_POLLER">Check cacti's poller</a></h1>

    <p>First make sure that crontab always shows poller.php. This program will either call cmd.php, the PHP based poller _or_ cactid, the fast alternative, written in C. Define the poller you're using at <kbd class="USERINPUT">Settings</kbd>, <kbd class="USERINPUT">Poller</kbd>. Cactid has to be implemented seperately, it does not come with cacti by default.</p>

    <p>Now, clear <tt class="FILENAME">./log/cacti.log</tt> (or rename it to get a fresh start)</p>

    <p>Then, change <kbd class="USERINPUT">Settings</kbd>, <kbd class="USERINPUT">Poller Logging Level</kbd> to DEBUG for _one_ polling cycle. You may rename this log as well to avoid more stuff added to it with subsequent polling cycles.</p>

    <p>Now, find the host/data source in question. The <kbd class="USERINPUT">Host[&lt;id&gt;]</kbd> is given numerically, the &lt;id&gt; being a specific number for that host. Find this &lt;id&gt; from the <kbd class="USERINPUT">Devices</kbd> menue when editing the host: The url contains a string like</p>
    <pre class="SCREEN">
id=&lt;id&gt;
</pre>

    <p>Check, whether the output is as expected. If not, check your script (e.g. <tt class="FILENAME">/full/path/to/perl</tt>). If ok, proceed to next step</p>

    <p>This procedure may be replaced by running the poller manually for the failing host only. To do so, you need the &lt;id&gt;, again. If you're using cmd.php, set the DEBUG logging level as defined above and run</p>
    <pre class="SCREEN">
php -q cmd.php &lt;id&gt; &lt;id&gt;
</pre>

    <p>If you're using cactid, you may override logging level when calling the poller:</p>
    <pre class="SCREEN">
./cactid --verbosity=5 &lt;id&gt; &lt;id&gt;
</pre>

    <p>All output is printed to STDOUT in both cases. This procdure allows for repeated tests without waiting for the next polling interval. And there's no need to manually search for the failing host between hundreds of lines of output.</p>
  </div>

  <div class="NAVFOOTER">
    <hr align="left" width="100%">

    <table summary="Footer navigation table" width="100%" border="0" cellpadding="0" cellspacing="0">
      <tr>
        <td width="33%" align="left" valign="top"><a href="check_data_gathering.html" accesskey="P">Prev</a></td>

        <td width="34%" align="center" valign="top"><a href="index.html" accesskey="H">Home</a></td>

        <td width="33%" align="right" valign="top"><a href="check_mysql_updating.html" accesskey="N">Next</a></td>
      </tr>

      <tr>
        <td width="33%" align="left" valign="top">Check Basic Data Gathering</td>

        <td width="34%" align="center" valign="top"><a href="debugging.html" accesskey="U">Up</a></td>

        <td width="33%" align="right" valign="top">Check MySQL updating</td>
      </tr>
    </table>
  </div>
</body>
</html>
